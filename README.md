# bdo-umaru-bot
## Discord.js bot for scraping black desert market queue and coupons
  Сurrently dev and support only russian region

## Запуск
  Для запуска необходимо создать `config.json` аналогично `config-example.json`, указать в нем токен, префикс и опционально изменить место хранения данных.

## Используемые для скрапинга данных ресурсы
  Все действующие купоны берутся с сайта [Орбиты-Игр](https://orbit-games.com/)  
  Очередь аукциона берется с [Velia Inn](https://veliainn.com/)  

## Настройка на сервере
  У бота отсутвует вайтлист на сервера, так что если решите использовать в личных целях на публичном сервере, обязательно реализуйте эту проверку. Это можно сделать в методах [`ready`](https://github.com/exi66/BDO-Umaru-bot/blob/cca059c600dde5fde71854ed53ff8154c70de51b/index.js#L17) и [`guildCreate`](https://github.com/exi66/BDO-Umaru-bot/blob/cca059c600dde5fde71854ed53ff8154c70de51b/index.js#L22).  
### BDO
  Самый базовый функционал доступен сразу по команде `!start`. Создается категория и два канала в ней, в которые постятся купоны и регистрируемые на аукционе V БС, V бижутерия Маноса и Деборики с упоминанием созданных ролей. 
  Чтобы добавить свои предметы для отслеживания используется команда `!track <add | list | remove>`. Узнать айди предметов можно на [кодексе](https://bdocodex.com/ru/).  
  Если необходимо точечно что-то изменить в конфиге, можно использовать команду `!config edit <key> <new value>`, где ключом может быть:  
  - `category` - id категории каналов бота  
  - `queue` - id канала очереди аукциона  
  - `coupons` - id канала с купонами  
  - `coupons-role` - id роли, которая упоминается при публикации купонов
  - `premium` - флаг true или false, который отвечает за возможность отлеживания больше 5 групп товаров на сервере. Этот параметр может менять только root-пользователь, id которого указывается в `config.json`  
Этой же командой можно посмотреть сокращенный конфиг текущего сервера `!config` или весь `!config json`.
### Вспомогательные команды
`!help [cmd name or alias]` выводит все команды при отсутствии аргументов и краткую информацию по использованию команды в случае указания ее имени в аргументе  
`!exec <cmd>` выполняет следующий после команды код. Команда доступна только root-пользователю  
`!umaru [reques]` постит рандомную гифку по запросу  
  
  
